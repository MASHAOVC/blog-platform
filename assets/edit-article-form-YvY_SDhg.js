import{ak as A,a as x,ad as j,j as e,ah as h,aA as S,am as b}from"./index-p0IonZ0O.js";import{s as i,A as F}from"./article-form-CNZHOGat.js";import{u as E}from"./useQuery-M7MhThxl.js";import{u as N}from"./useMutation-C7BeJXOZ.js";import{A as Q}from"./index-BC3aIm6d.js";import"./index.esm-CADciqb-.js";const k=()=>{const{slug:t}=A(),n=x(),a=j(),c=N({mutationFn:r=>S(t,r),onSuccess:()=>{a.removeQueries(["articles"]),n("/")},onError:r=>{try{const o=JSON.parse(r.message);console.error("Status:",o.status),console.error("Errors:",o.body.errors)}catch(o){console.error("Unexpected error format:",o)}}}),m=a.getQueryData(["article",t]),{data:s,error:l,isPending:u}=E({queryKey:["article",t],queryFn:()=>b(t),enabled:!m});if(u)return e.jsx("form",{className:i["create-article-form"],children:e.jsx(h,{size:"large"})});if(l||!(s!=null&&s.article))return e.jsx("form",{className:i["create-article-form"],children:e.jsx(Q,{message:"Something's gone terribly wrong!",type:"error",style:{fontFamily:"'Inter', sans-serif"}})});const{title:p,description:y,body:f,tagList:g}=s.article,d=r=>{c.mutate(r)};return e.jsx(F,{title:p,description:y,body:f,tagList:g,onSubmit:d})};export{k as EditArticleForm};
